general:
  branches:
    ignore:
      - gh-pages
      - master

machine:
  timezone:
    Asia/Tokyo
  ruby:
    version:
      2.3.1

dependencies:
  pre:
    - gem install reveal-ck --no-ri --no-doc

test:
  override:
    - cd /home/ubuntu/talks/$CIRCLE_BRANCH && reveal-ck generate && cp slides ../docs

deployment:
  github:
    branch: /.*/
    commands:
      - git config --global user.name chroju
      - git config --global user.email chor.chroju@gmail.com
      - git checkout master
      - git add docs/*
      - git commit -m "Circle CI deploy"
      - git push git@github.com:chroju/talks master

